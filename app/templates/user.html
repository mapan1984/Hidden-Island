{% extends "_layouts/default.html" %}
{% import '_includes/macros.html' as macros %}

{% block title %}{{ user.username }}{% endblock %}


{% block header %}
<div class="page-header container">
  <h1>{{ user.username }}</h1>

  {% if user.name or user.location %}
  <p>
    {% if user.name %}{{ user.name }}{% endif %}
    {% if user.location %}
        From <a href="http://maps.google.com/?q={{ user.location }}">{{ user.location }}</a>
    {% endif %}
  </p>
  {% endif %}

  {% if current_user.is_administrator %}
  <p><a href="mailto:{{ user.email }}">{{ user.email }}</a></p>
  {% endif %}

  {% if user.about_me %}<p>{{ user.about_me }}</p>{% endif %}

  <p>Member since {{ moment(user.member_since).format('LLL') }}. Last seen {{ moment(user.last_seen).fromNow(refresh=True) }}.</p>

  <p>
    {% if user == current_user %}
    <a class="btn btn-default" href="{{ url_for('main.edit_profile') }}">Edit Profile</a>
    {% endif %}
    {% if current_user.is_administrator %}
    <a class="btn btn-danger" href="{{ url_for('admin.edit_profile_admin', id=user.id) }}">Edit Profile [Admin]</a>
    {% endif %}
  </p>

</div>
{% endblock %}

{% block content %}
  {% include '_includes/articles.html'%}
  <div>
    {{ macros.pagination_widget(pagination, 'main.user', username=user.username) }}
  </div>
{% endblock %}

{% block js %}
{{ super() }}
{{ moment.include_moment() }}
{{ moment.lang('zh-CN')}}
{% endblock %}
